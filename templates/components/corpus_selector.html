<div id="{{id}}" class="tile is-parent">
  <script>document.body.addEventListener("refocus", function(evt){
    const input = htmx.find("#{{id}} input");
    const end = input.value.length;
    input.setSelectionRange(end, end);
    input.focus();
})
  </script>
  <div class="tile is-parent is-8">
    <article class="tile is-child box">
      <h1 class="title">Available corpora</h1>
      <h2 class="subtitle">Select the corpora you want to analyze</h2>
      <div class="control block">
        <input class="input"
               type="text"
               name="filter"
               placeholder="Filter by corpus name"
               hx-post="{{ url_prefix }}components/corpus_selector"
               hx-trigger="keyup changed delay:500ms"
               hx-target="#{{id}}"
               hx-swap="outerHTML"
               value="{{ filter }}">
      </div>
      <div class="table-container block">
        {% if corpus_names.is_empty() %}
          <div class="notification is-warning">
            Empty corpus list.
            {%  if !filter.is_empty() %}
              Remove the filter "{{ filter }}"" to see all corpora.
            {% endif %}
          </div>
        {% else %}
          <table class="table">
            <thead>
              <tr>
                <td></td>
                <td>Corpus name</td>
              </tr>
            </thead>
            <tbody>
              {% for c in corpus_names %}
                <tr>
                  <td>
                    <button class="button is-small">Add</button>
                  </td>
                  <td>{{ c }}</td>
                </tr>
              {% endfor %}
            </tbody>
            <tfoot>
              <tr>
                <td colspan="2">
                  <button class="button">Add all</button>
                </td>
              </tr>
            </tfoot>
          </table>
        {% endif %}
      </div>
    </article>
  </div>
  <div class="tile is-parent is-4">
    <article class="tile is-child box">
      <h1 class="title">Selected corpora</h1>
      <div class="notification is-info">Currently, no corpus is selected.</div>
    </article>
  </div>
</div>
